# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ –±–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–∞—Ä—Å–∏—Ç—å —Å–∞–π—Ç pravo.by –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –≤–æ–ø—Ä–æ—Å–∞, –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–µ—à–∞**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ `dynamic_searcher.search_and_add_to_knowledge_base()`, –Ω–æ –∫ —ç—Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É —Å–∏—Å—Ç–µ–º–∞ —É–∂–µ —Ä–µ—à–∏–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫.

2. **–õ–æ–≥–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ**: 
   - `bot_handler.py` –≤—ã–∑—ã–≤–∞–ª `should_use_dynamic_search()` –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è
   - –ï—Å–ª–∏ —Ä–µ—à–µ–Ω–∏–µ –±—ã–ª–æ "–¥–∞", —Ç–æ –≤—ã–∑—ã–≤–∞–ª—Å—è `dynamic_searcher.search_and_add_to_knowledge_base()`
   - –¢–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞
   - –ù–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤–∏–¥–µ–ª —Å–æ–æ–±—â–µ–Ω–∏–µ "–ò—â—É –Ω–∞ pravo.by", –∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—á–∏–Ω–∞–ª–∞ –ø–æ–∏—Å–∫

3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö, —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –ø—É—Ç–∞–Ω–∏—Ü—É.

## –†–µ—à–µ–Ω–∏–µ

### 1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ `bot_handler.py`
–ü–µ—Ä–µ–º–µ—Å—Ç–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É –∫–µ—à–∞ –Ω–∞ –±–æ–ª–µ–µ —Ä–∞–Ω–Ω—é—é —Å—Ç–∞–¥–∏—é - —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞:

```python
if need_dynamic_search:
    # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    logger.info(f"üîç –ò–°–¢–û–ß–ù–ò–ö: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ dynamic_searcher
    if dynamic_searcher._check_if_info_already_exists(user_question):
        logger.info(f"üìö –ò–°–¢–û–ß–ù–ò–ö: –ù–∞–π–¥–µ–Ω–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å pravo.by –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}")
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        cached_docs = search_relevant_docs(user_question, n_results=5)
        dynamic_docs = [
            doc for doc in cached_docs 
            if doc.get('metadata', {}).get('source_type') == 'pravo.by_dynamic'
        ]
        
        if dynamic_docs:
            await processing_msg.edit_text("üìö –ò—Å–ø–æ–ª—å–∑—É—é –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å pravo.by...")
            answer = get_answer(user_question, dynamic_docs)
            answer += f"\n\nüìç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ —Ä–∞–Ω–µ–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ pravo.by"
            await processing_msg.edit_text(answer)
            logger.info(f"‚úÖ –ò–°–¢–û–ß–ù–ò–ö: –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω –∏–∑ –∫–µ—à–∞ pravo.by –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}")
            return
    
    # –ï—Å–ª–∏ –∫–µ—à –Ω–µ –ø–æ–º–æ–≥, –≤—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–ª–Ω—ã–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
    await processing_msg.edit_text("üåê –ò—â—É –Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ pravo.by...")
```

### 2. –£–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ `dynamic_search.py`
–£–±—Ä–∞–ª –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–µ—à–∞ –∏–∑ –º–µ—Ç–æ–¥–∞ `search_and_add_to_knowledge_base()`:

```python
def search_and_add_to_knowledge_base(self, user_question: str) -> Tuple[Optional[str], bool]:
    logger.info(f"üîç –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ô –ü–û–ò–°–ö: –ó–∞–ø—Ä–æ—Å - {user_question}")
    
    try:
        # –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ bot_handler.py
        # –°—Ä–∞–∑—É –∏—â–µ–º –Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ pravo.by
        logger.info(f"üåê –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ô –ü–û–ò–°–ö: –ò—â–µ–º –Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ pravo.by")
        
        # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å –ø–æ–∏—Å–∫–æ–º –Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...
```

### 3. –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞
–î–æ–±–∞–≤–∏–ª –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- "üîç –ü—Ä–æ–≤–µ—Ä—è—é –∫–µ—à –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤..."
- "üìö –ò—Å–ø–æ–ª—å–∑—É—é –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å pravo.by..."
- "üåê –ò—â—É –Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ pravo.by..."

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å: "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é –Ω–∞ —Ç–∞–∫—Å–∏?" ‚Üí –ü–æ–∏—Å–∫ –Ω–∞ pravo.by ‚Üí –û—Ç–≤–µ—Ç
2. –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å: "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é –Ω–∞ —Ç–∞–∫—Å–∏?" ‚Üí **–°–Ω–æ–≤–∞ –ø–æ–∏—Å–∫ –Ω–∞ pravo.by** ‚Üí –û—Ç–≤–µ—Ç

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å: "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é –Ω–∞ —Ç–∞–∫—Å–∏?" ‚Üí –ü–æ–∏—Å–∫ –Ω–∞ pravo.by ‚Üí –û—Ç–≤–µ—Ç ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à
2. –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å: "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é –Ω–∞ —Ç–∞–∫—Å–∏?" ‚Üí **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞** ‚Üí –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ ‚Üí –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. **`modules/bot_handler.py`** - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ –Ω–∞ —Ä–∞–Ω–Ω–µ–º —ç—Ç–∞–ø–µ
2. **`modules/dynamic_search.py`** - –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–µ—à–∞

### –õ–æ–≥–∏–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:
1. –î–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ–º–µ—á–∞—é—Ç—Å—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ `source_type: 'pravo.by_dynamic'`
2. –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–µ—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —ç—Ç–∏–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
3. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —Ö–æ—Ä–æ—à–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º (distance < 0.4), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–µ—à
4. –ï—Å–ª–∏ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–æ–≤—ã–π –ø–æ–∏—Å–∫

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- **–≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤**: –ù–µ —Ç—Ä–∞—Ç–∏–º –≤—Ä–µ–º—è –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
- **–ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã**: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- **–õ—É—á—à–∏–π UX**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–µ—à
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –ß–µ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–æ–º, –æ—Ç–∫—É–¥–∞ –±–µ—Ä–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã:
1. –ó–∞–¥–∞–π—Ç–µ –±–æ—Ç—É –≤–æ–ø—Ä–æ—Å: "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é –Ω–∞ —Ç–∞–∫—Å–∏ –≤ –ë–µ–ª–∞—Ä—É—Å–∏?"
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞ (–±–æ—Ç –Ω–∞–π–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ pravo.by)
3. –ó–∞–¥–∞–π—Ç–µ —Ç–æ—Ç –∂–µ –≤–æ–ø—Ä–æ—Å –ø–æ–≤—Ç–æ—Ä–Ω–æ
4. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –±—ã—Å—Ç—Ä–µ–µ, –ø–æ–∫–∞–∑–∞–≤ —Å–æ–æ–±—â–µ–Ω–∏–µ "üìç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ —Ä–∞–Ω–µ–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ pravo.by"

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- ‚úÖ –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –Ω–∞ pravo.by
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–µ—à
- ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–µ—à
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã
- ‚úÖ –≠–∫–æ–Ω–æ–º—è—Ç—Å—è —Ä–µ—Å—É—Ä—Å—ã —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞! 